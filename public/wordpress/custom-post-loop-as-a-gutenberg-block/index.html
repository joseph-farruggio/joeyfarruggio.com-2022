<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5-Step Guide To Creating a Posts Loop Block in Gutenberg with ACF and block.json</title>
    <meta name="description" content="">
    
    <script>
        // On page load or when changing themes, best to add inline in `head` to avoid FOUC
        
        try {
            if (!('theme' in window.localStorage)) {
                document.documentElement.classList.add('dark')
                document.documentElement.style.backgroundColor = "#040817";
            }
            else if (window.localStorage.theme === 'dark' || (!('theme' in window.localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark')
                document.documentElement.style.backgroundColor = "#040817";
            } else {
                document.documentElement.classList.remove('dark')
                document.documentElement.style.backgroundColor = "#fff";
            }
        } catch (_) {}
    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-129275479-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-129275479-1');
    </script>

    <link rel="stylesheet" href="/css/styles.min.css">
    <link rel="stylesheet" href="/css/nightowl.min.css">
    
    <!-- test -->
</head>
<body x-data="app()" class="bg-white dark:bg-[#040817] transition-colors dark:text-white text-slate-800 font-body">
    <header class="max-w-screen-xl mx-auto px-4 py-4 md:py-8 text-right" x-data="{menuOpen: false}">
        <div class="hidden fixed md:static top-0 left-0 h-screen w-screen md:h-auto md:w-full z-40 pb-16 md:p-0 bg-white dark:bg-darkBG md:bg-transparent dark:md:bg-transparent md:flex md:items-center md:justify-between" :class="{'block': menuOpen, 'hidden': !menuOpen}">
            <nav class="text-center flex flex-col md:block text-2xl md:text-lg md:space-x-6">
                <a href="/" class="block md:inline dark:text-slate-500  dark:hover:text-white text-slate-900 transition-colors hover:text-orange-400  no-underline  px-4 py-3 rounded-lg">Home</a>
                <a href="/contact" class="block md:inline dark:text-slate-500  dark:hover:text-white text-slate-900 transition-colors hover:text-orange-400  no-underline  px-4 py-3 rounded-lg">Contact</a>
                <a href="/blog" class="block md:inline dark:text-slate-500  dark:hover:text-white text-slate-900 transition-colors hover:text-orange-400  no-underline  px-4 py-3 rounded-lg">Blog</a>
            </nav>
            <button x-on:click="toggleTheme()" class="print:hidden relative flex items-center mx-auto md:mx-0 mt-32 md:mt-0 justify-between border dark:border-slate-800 bg-white dark:bg-slate-900 border-slate-200 px-4 py-2 rounded-full outline-none focus:outline-none shadow-none">
                <div class="h-full aspect-square border-slate-300 bg-white dark:bg-slate-800 rounded-full shadow-lg absolute top-0 left-0 dark:-ml-10 dark:left-full transition-transform"></div>
                <svg xmlns="http://www.w3.org/2000/svg" class="relative h-6 w-6 dark:text-slate-400 text-orange-400 -ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="relative h-6 w-6 dark:text-orange-400 text-slate-300 ml-4 -mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>
            </button>
        </div>
        <button class="print:hidden  border-none ml-full inline-block p-4 relative z-50 md:hidden" @click="menuOpen = !menuOpen">
            <svg xmlns="http://www.w3.org/2000/svg" x-show="!menuOpen" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16" /></svg>
            <svg xmlns="http://www.w3.org/2000/svg" x-show="menuOpen" x-cloak class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
        </button>
    </header>
    
    <main class="">
        <article id="post" class="prose lg:prose-xl max-w-screen-md mx-auto px-4 mt-12" :class="{'prose-invert': dark}">
    <h1 class="dark:text-orange-400 text-4xl text-highlight-orange">5-Step Guide To Creating a Posts Loop Block in Gutenberg with ACF and block.json</h1>
    <p class=" text-lg mt-4 leading-relaxed">Build a custom block to loop through your WordPress blog posts with Advanced Custom Fields and block.json.</p>
    <span class="flex items-center space-x-4 mt-4 text-gray-400">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
        <time datetime="2022-10-05">05 Oct 2022</time>
    </span>
    <div class="mt-16"></div>   
    <blockquote>
<p>This post was updated on October, 5th 2022 to reflect changes in how we register blocks in WordPress 6.0 and Advanced Custom Fields 6.0.</p>
</blockquote>
<h2 id="ignore-toc" class="ignore-toc" x-intersect:enter="$store.showToc = false" x-intersect:leave="$store.showToc = true">Steps in this guide:</h2>
<ol>
<li><a href="#create-fields">Creating our fields</a></li>
<li><a href="#register-block">Register our blocks with block.json</a></li>
<li><a href="#block-data">Handle our block data</a></li>
<li><a href="#render-template">Create the block render template</a></li>
<li><a href="#using-block">Using the block</a></li>
</ol>
<h2 id="create-fields">Creating our fields</h2>
<p>What fields will our block will need to control an output of posts? Sometimes I like to start here because it gets me thinking about how Iâ€™m going to use the block. I know this block will interface with the WP_Query class, so a few fields immediately come to mind.</p>
<ol>
<li><strong>Selection Type</strong> <br/>Will we display the most recent posts or do we want to hand pick them?</li>
<li><strong>Category</strong>  <br/>If weâ€™re displaying the most recent posts, do we want to limit them to a specific category?</li>
<li><strong>Limit</strong>  <br/>If weâ€™re displaying the most recent posts, do we want to set a limit for how many are returned?</li>
<li><strong>Select Posts</strong>  <br/>If we choose &quot;select posts&quot;, we'll want a relationship field to hand pick our posts from a list.</li>
</ol>
<p><img src="/images/block-guide-field-group.jpg" alt="&quot;Field Group&quot;" title="Creating the block's field group"></p>
<p>The <code>Category</code> and <code>Limit</code> fields are conditionally displayed if the <code>Selection Type</code> is &quot;recent&quot;. Likewise, the <code>Select Posts</code> field is only displayed if the <code>Selection type</code> is &quot;select posts&quot;.</p>
<p>Want to import this field group into ACF Pro? <a href="https://gist.github.com/joseph-farruggio/72c69968b23c6701932af84690516240" target="_blank">Get the JSON</a> â€“Â Once you've imported the JSON into ACF, make sure to update the location rules to match your block name after you register your block.</p>
<h2 id="register-block">Register the block</h2>
<p>Since WP 6.0, the recommended way of registering blocks is <a href="https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/">via block.json</a>. This is a big deal, because keeping our ACF blocks as close to core as possible allows us to take advantage of many native block features.</p>
<p>You can register blocks from a plugin or your theme. For simplicity, and to make this guide more accessible to beginners, Iâ€™ll be doing this directly in my theme. Go ahead and stub out the following structure:</p>
<pre class="language-text"><code class="language-text">/theme-root<br>â”‚<br>â””â”€â”€â”€ /blocks<br>â”‚   â”‚   register-blocks.php<br>â”‚   â”‚<br>â”‚   â””â”€â”€â”€ /posts-block<br>â”‚       â”‚   block.json<br>â”‚       â”‚   block.php<br>â”‚       â”‚   template.php</code></pre>
<p>Inside of <code>/blocks/register-blocks.php</code>, weâ€™ll include the path to our blockâ€™s json file. This is where weâ€™ll register all of our future blocks:</p>
<pre class="language-php"><code class="language-php"><span class="token function">register_block_type</span><span class="token punctuation">(</span> <span class="token function">get_template_directory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'/blocks/posts-loop/block.json'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>In your <code>functions.php</code> you can include the path to <code>/blocks/register-blocks.php.</code></p>
<pre class="language-php"><code class="language-php"><span class="token comment">/**<br> * Register ACF Blocks<br> */</span><br><span class="token keyword">require</span> <span class="token function">get_template_directory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'/blocks/register-blocks.php'</span><span class="token punctuation">;</span></code></pre>
<h2 id="block-data">Handle our block data</h2>
<p><code>/blocks/posts-block/block.php</code> will serve as the <em>model / controller</em> for our block. Itâ€™s where weâ€™ll handle all of the data that gets passed into the render template or the <em>view</em>. This helps keep things clean and organized so our logic is one place (block.php) and our front-end template (template.php) is in another.</p>
<pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><span class="token comment">/**<br> * Posts Loop Block<br> */</span><br><br><span class="token comment">// $data is what we're going to expose to our render template</span><br><span class="token variable">$data</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><br>	<span class="token string single-quoted-string">'selection_type'</span> <span class="token operator">=></span> <span class="token function">get_field</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'selection_type'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span><br>	<span class="token string single-quoted-string">'category'</span> <span class="token operator">=></span> <span class="token function">get_field</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'category'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span><br>	<span class="token string single-quoted-string">'limit'</span> <span class="token operator">=></span> <span class="token function">get_field</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'limit'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span><br>	<span class="token string single-quoted-string">'select_posts'</span> <span class="token operator">=></span> <span class="token function">get_field</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'select_posts'</span><span class="token punctuation">)</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// WP Query Args</span><br><span class="token variable">$queryArgs</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><br>    <span class="token string single-quoted-string">'post_type'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'post'</span><span class="token punctuation">,</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// If the selection type is "recent", check  for categories and limit</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'selection_type'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'recent'</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$queryArgs</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'category__in'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'category'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token variable">$queryArgs</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'posts_per_page'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'limit'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// If the selection type is "select", pass in the selected post IDs</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'selection_type'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'select'</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$queryArgs</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post__in'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'select_posts'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Create a new WP_Query instance</span><br><span class="token variable">$posts</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WP_Query</span><span class="token punctuation">(</span> <span class="token variable">$queryArgs</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Expose the response of WP_Query to the render template</span><br><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'posts'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$posts</span><span class="token punctuation">;</span><br><br><span class="token comment">/** <br> * Pass the block data into the template part<br> * @param array $block contains attributes and data for the block coming from Gutenberg<br> * @param boolean $is_preview whether the block is in the preview state (the Gutenberg editor) or not (the front-end)<br> * @param integer $post_id the post id of the post that the block is in<br> * @param array $data is what we're going to expose to our render template<br> */</span> <br><br><span class="token function">get_template_part</span><span class="token punctuation">(</span><br>	<span class="token string single-quoted-string">'blocks/posts-loop/template'</span><span class="token punctuation">,</span><br>	<span class="token constant">null</span><span class="token punctuation">,</span><br>	<span class="token keyword">array</span><span class="token punctuation">(</span><br>		<span class="token string single-quoted-string">'block'</span>      <span class="token operator">=></span> <span class="token variable">$block</span><span class="token punctuation">,</span><br>		<span class="token string single-quoted-string">'is_preview'</span> <span class="token operator">=></span> <span class="token variable">$is_preview</span><span class="token punctuation">,</span><br>		<span class="token string single-quoted-string">'post_id'</span>    <span class="token operator">=></span> <span class="token variable">$post_id</span><span class="token punctuation">,</span><br>		<span class="token string single-quoted-string">'data'</span>       <span class="token operator">=></span> <span class="token variable">$data</span><span class="token punctuation">,</span><br>	<span class="token punctuation">)</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="render-template">Create the block render template</h2>
<p>Now we can create the blockâ€™s render template: <code>/blocks/posts-loop/template.php</code>.</p>
<pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><span class="token comment">/**<br> * Block Name: Posts Loop Block<br> *<br> * Description: Displays a list of posts.<br> */</span><br><br><span class="token comment">// The block attributes</span><br><span class="token variable">$block</span> <span class="token operator">=</span> <span class="token variable">$args</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'block'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token comment">// The block data</span><br><span class="token variable">$data</span> <span class="token operator">=</span> <span class="token variable">$args</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token comment">// Dynamic block ID</span><br><span class="token variable">$block_id</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'posts-loop-block-'</span> <span class="token operator">.</span> <span class="token variable">$block</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token comment">// Check for custom block ID</span><br><span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$block</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'anchor'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$block_id</span> <span class="token operator">=</span> <span class="token variable">$block</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'anchor'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Block classes</span><br><span class="token variable">$className</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'posts-loop-block'</span><span class="token punctuation">;</span><br><span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$block</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'className'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$className</span> <span class="token operator">.=</span> <span class="token string single-quoted-string">' '</span> <span class="token operator">.</span> <span class="token variable">$block</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'className'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token delimiter important">?></span></span><br><br><span class="token comment">&lt;!-- Our front-end template to loop the posts --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token variable">$block_id</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token variable">$className</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br>    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'posts'</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token function">have_posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">while</span><span class="token punctuation">(</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'posts'</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token function">have_posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'posts'</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token function">the_post</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token delimiter important">?></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token function">the_title</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>                    <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token function">the_excerpt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>            <span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>    <span class="token delimiter important">?></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>Within our render template, our block attributes, such as the blockâ€™s ID or classnames, are found in <code>$args['block']</code>. Our block data, fields we specified in <code>blocks/posts-loop/block.php</code>, are found in <code>$args[â€™dataâ€™]</code>.</p>
<p>The response of WP_Query is exposed to this render template in <code>$data['posts']</code>. This is because of the work we did in <code>/blocks/posts-loop/block.php</code>. Here's the line specifically:</p>
<pre class="language-php"><code class="language-php"><span class="token comment">// Create a new WP_Query instance</span><br><span class="token variable">$posts</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WP_Query</span><span class="token punctuation">(</span> <span class="token variable">$queryArgs</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Expose the response of WP_Query to the render template</span><br><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'posts'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$posts</span><span class="token punctuation">;</span></code></pre>
<h2 id="using-block">Using the block</h2>
<p><img src="/images/block-guide-editor.jpg" alt="&quot;Block backend UI&quot;" title="Using the block in the editor"></p>
<p>This is what our block looks like when we insert it into the editor. The block's preview is on the left in the content column and our block's fields are in the right sidebar.</p>
<p><img src="/images/block-guide-select-posts.jpg" alt="&quot;Block backend UI - Select Posts&quot;" title="Using the block in the editor to select posts"></p>
<p>If I change the &quot;Selection Type&quot; from <code>Recent</code> to <code>Select posts</code> I'll be able to use the &quot;Select Posts&quot; relationship field.</p>
<hr>
<p>ðŸ¤œ ðŸ¤› You did it!</p>
<p>If you've followed along, let me know how this went or if you have any questions.</p>
<aside 
  x-data="visibleNavHighlighter" 
  x-on:scroll.window.throttle.50ms="onScroll()" 
  x-show.important="$store.showToc"
  x-transition.opacity
  x-cloak>
  <div class="fixed mt-20 right-0 bottom-0 hidden w-64 overflow-y-auto py-8 px-6 md:top-[4rem] xl:block">
    <p class="text-base">In This Guide</p>
    <ul class="space-y-3 list-none m-0 p-0">
        <template x-for="heading in headings">
            <li class="text-base p-0">
                <a :href="'#'+heading.id" class="no-underline" 
                :class="visibleHeadingId == heading.id ? 'font-medium text-orange-400 dark:text-orange-400' : 'text-slate-800 dark:text-white'" x-text="heading.innerText"></a>
            </li>
        </template>
    </ul>
  </div>
</aside>
</article>

<div class=" max-w-screen-md mx-auto px-4 mt-12">
    <div id="disqus_thread"></div>
</div>
<script>
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://joeyfarruggio-com.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </main>

    <footer class="py-16 bg-slate-900 mt-16"> 

    </footer>
    <script defer src="/js/app.min.js"></script>
</body>
</html>