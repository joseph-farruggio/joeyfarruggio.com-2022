<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filter Posts by Category via Ajax - with Alpine.js</title>
    <meta name="description" content="">


    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-129275479-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-129275479-1');
    </script>

    <link rel="stylesheet" href="/css/tailwind.min.css">
    <link rel="stylesheet" href="/css/nightowl.min.css">
    
    
    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="Filter Posts by Category via Ajax - with Alpine.js"/>
    <meta property="og:url" content="https://joeyfarruggio.com/wordpress/posts-category-filter/" />
    <meta property="og:description" content="How to build a filter posts by category feature with Alpine.JS in WordPress." />
    <meta property="twitter:description" content="How to build a filter posts by category feature with Alpine.JS in WordPress." />
    
        <meta property="og:image" content="https://joeyfarruggio.com/images/posts-filter.png" />
    
    <meta property="og:type" content="article" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" ontent="https://joeyfarruggio.com/wordpress/posts-category-filter/" />
    <meta property="twitter:title" content="Filter Posts by Category via Ajax - with Alpine.js"/>
    <meta property="twitter:description" content="How to build a filter posts by category feature with Alpine.JS in WordPress." />
    
        <meta property="twitter:image" content="https://joeyfarruggio.com/images/posts-filter.png" />
    

    <link rel="canonical" href="https://joeyfarruggio.com/wordpress/posts-category-filter/" />
</head>
<body x-data="app()" class="bg-white dark:bg-[#040817] transition-colors dark:text-white text-slate-800 font-body">
    <header class="max-w-screen-xl mx-auto px-4 py-4 md:py-8 text-right" x-data="{menuOpen: false}">
        <div class="hidden fixed md:static top-0 left-0 h-screen w-screen md:h-auto md:w-full z-40 pb-16 md:p-0 bg-white dark:bg-darkBG md:bg-transparent dark:md:bg-transparent md:flex md:items-center md:justify-between" :class="{'block': menuOpen, 'hidden': !menuOpen}">
            <nav class="text-center flex flex-col md:block text-2xl md:text-lg md:space-x-6">
                <a href="/" class="block md:inline dark:text-slate-500  dark:hover:text-white text-slate-900 transition-colors hover:text-orange-400  no-underline  px-4 py-3 rounded-lg">Home</a>
                <a href="/contact" class="block md:inline dark:text-slate-500  dark:hover:text-white text-slate-900 transition-colors hover:text-orange-400  no-underline  px-4 py-3 rounded-lg">Contact</a>
                <a href="/blog" class="block md:inline dark:text-slate-500  dark:hover:text-white text-slate-900 transition-colors hover:text-orange-400  no-underline  px-4 py-3 rounded-lg">Blog</a>
            </nav>
            
        </div>
        <button class="print:hidden  border-none ml-full inline-block p-4 relative z-50 md:hidden" @click="menuOpen = !menuOpen">
            <svg xmlns="http://www.w3.org/2000/svg" x-show="!menuOpen" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16" /></svg>
            <svg xmlns="http://www.w3.org/2000/svg" x-show="menuOpen" x-cloak class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
        </button>
    </header>
    
    <main class="">
        <article id="post" class="prose prose-invert lg:prose-xl max-w-screen-md mx-auto px-4 mt-12">
    <h1 class="dark:text-orange-400 text-4xl text-highlight-orange">Filter Posts by Category via Ajax - with Alpine.js</h1>
    <p class=" text-lg mt-4 leading-relaxed">How to build a filter posts by category feature with Alpine.JS in WordPress.</p>
    <span class="flex items-center space-x-4 mt-4 text-gray-400">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
        <time datetime="2022-11-05">05 Nov 2022</time>
    </span>
    <div class="mt-16"></div>   
    <h2>What we're building</h2>
<p>We'll build a feature for our WordPress theme to filter posts by category. This will happen asynchronously - so the browser won't reload as new posts appear. We'll use Alpine.JS on the front-end for fetching data and displaying new posts.</p>
<p><img src="/images/posts-filter.png" alt="Filter Posts by Category in WordPress"></p>
<h2>Project structure</h2>
<p>How you structure this is up to you, but I want to clearly present the parts involved in this project:</p>
<pre class="language-text"><code class="language-text">/theme-root<br>│<br>└─── /template-parts/posts-filter<br>│   │   template.php<br>│   │   single-post.php<br>│   │   default-query.php<br>|<br>└─── /javascript<br>│   │   post-filter.js<br>|<br>└─── /inc<br>│   │   query-posts.php</code></pre>
<p><strong>/template-parts/posts-filter/</strong><br>
<code>template.php</code> will serve as our parent template. It's where we'll have most of our layout defined.</p>
<p><code>single-post.php</code> will hold the markup for an individual blog post. If your theme already has a template partial for posts displayed in a grid than you can use that instead.</p>
<p><code>default-query.php</code> will hold our post query and args for the intitial page load. We don't need JavaScript for this.</p>
<p><strong>/javascript/</strong><br>
<code>posts-filter.js</code> will hold our Alpine.JS component. It's responsible for handling the category buttons and fetching and displaying posts.</p>
<p>This guide assumes you understand how to enqueue JavaScript in WordPress. Whether you want to include Alpine.js via CDN or NPM is up to you. Hit those <a href="https://alpinejs.dev/essentials/installation" target="_blank">docs</a>!</p>
<p><strong>/inc/</strong><br>
<code>query-posts.php</code> will hold our post query and args for filtering and loading more posts. Our JavaScript will make requests to this file to receive back a list of blog posts.</p>
<p>We need to require this file from <code>functions.php</code>:</p>
<pre class="language-php"><code class="language-php"><span class="token comment">/**<br> * API for querying posts<br> */</span><br><span class="token keyword">require</span> <span class="token function">get_template_directory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'/inc/query-posts.php'</span><span class="token punctuation">;</span></code></pre>
<hr>
<h2>Base template and default state</h2>
<p>Here's the skeleton of our base template. The wrapper div references an Alpine.js component called <code>filterPosts()</code>. We'll create that component later.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <br>    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>flex items-start gap-8 alignwide mt-32<span class="token punctuation">"</span></span><br>    <span class="token attr-name">x-data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>filterPosts(<span class="token punctuation">'</span>&lt;?php echo admin_url(<span class="token punctuation">'</span>admin-ajax.php<span class="token punctuation">'</span>); ?><span class="token punctuation">'</span>)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token comment">&lt;!-- Category Filter Sidebar --></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aside</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>w-1/4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aside</span><span class="token punctuation">></span></span><br><br>    <span class="token comment">&lt;!-- Posts Column --></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>w-3/4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<h3>Default Query</h3>
<p>First, let's setup the default state for the posts column. The following code goes in <code>/template-parts/default-query.php</code>.</p>
<p>This is a simple query that returns ten blog posts and returns each post as our <code>/template-parts/posts-filter/single-post.php</code> template.</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$query_args</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><br>    <span class="token string single-quoted-string">'posts_per_page'</span> <span class="token operator">=></span> <span class="token number">10</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'post_status'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'publish'</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'post_type'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'post'</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token variable">$the_query</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WP_Query</span><span class="token punctuation">(</span><span class="token variable">$query_args</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$the_query</span><span class="token operator">-></span><span class="token function">have_posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">:</span><br>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token variable">$the_query</span><span class="token operator">-></span><span class="token function">have_posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token variable">$the_query</span><span class="token operator">-></span><span class="token function">the_post</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token function">get_template_part</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'template-parts/posts-filter/single-post'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">endwhile</span><span class="token punctuation">;</span><br>    <span class="token function">wp_reset_postdata</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">endif</span><span class="token punctuation">;</span></code></pre>
<h3>Single Post Temlate</h3>
<p>This is the single post template.</p>
<pre class="language-php"><code class="language-php"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br>    <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">has_post_thumbnail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token function">the_post_thumbnail</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'full'</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'class'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'m-0'</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token delimiter important">?></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-xl font-medium mt-2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token function">the_title</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>Inside of our posts column div lets call display the result of that query:</p>
<pre class="language-php"><code class="language-php"><span class="token comment">&lt;!-- Posts Column --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>w-3/4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token comment">&lt;!-- Default posts query --></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>grid grid-cols-2 gap-6<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>        <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token function">get_template_part</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'template-parts/posts-filter/default-query'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>This is what we've built so far:</p>
<ol>
<li>A shell for our sidebar</li>
<li>A content area for posts</li>
<li>A default query that returns 10 posts w/o JavaScript</li>
</ol>
<p><img src="/images/default-query.png" alt="Default Query"></p>
<hr>
<h2>Category Sidebar</h2>
<p>Our filter won't work right away, but lets get our categories display as a list of buttons.</p>
<pre class="language-php"><code class="language-php"><span class="token comment">&lt;!-- Category Filter Sidebar --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aside</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>w-1/4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-xl font-medium<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Categories<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>    <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <br>        <span class="token variable">$categories</span> <span class="token operator">=</span> <span class="token function">get_categories</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span> <span class="token keyword">empty</span><span class="token punctuation">(</span> <span class="token variable">$categories</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">:</span> <br>    <span class="token delimiter important">?></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-none px-0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>        <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">foreach</span> <span class="token punctuation">(</span> <span class="token variable">$categories</span> <span class="token keyword">as</span> <span class="token variable">$category</span> <span class="token punctuation">)</span> <span class="token punctuation">:</span><br>        <br>        <span class="token comment">// Skip "Uncategorized" category</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$category</span><span class="token operator">-></span><span class="token property">name</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'Uncategorized'</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span>    <br><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hover:bg-slate-100 my-1 px-4 py-2 -ml-4 rounded-md<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-xl text-slate-800 w-full text-left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>                    <span class="token php language-php"><span class="token delimiter important">&lt;?=</span> <span class="token function">esc_html</span><span class="token punctuation">(</span> <span class="token variable">$category</span><span class="token operator">-></span><span class="token property">name</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>        <br>        <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">endforeach</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br>    <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">endif</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aside</span><span class="token punctuation">></span></span></code></pre>
<p>This gives us a list of categories in the sidebar:</p>
<p><img src="/images/category-list.png" alt="Category filter"></p>
<hr>
<h2>Filtering by category</h2>
<p>Now we're getting into the complex stuff. Here's what we need to do:</p>
<ol>
<li>Create an Alpine.js component to fetch posts</li>
<li>Create a dynamic instance of <code>WP_Query()</code> that Alpine.js will talk to</li>
<li>Initiate a fetch when a category button is clicked.</li>
</ol>
<h3>Alpine.js component</h3>
<p>If you're new to Alpine.js, hit the <a href="https://alpinejs.dev/essentials/installation" target="_blank">docs</a> to learn how to install Alpine via NPM or just grab a link from the CDN.</p>
<p>In my example I've installed Alpine via NPM. That's why you see <code>import</code> and <code>Alpine.start()</code>. Ignore those if you're using the CDN.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> Alpine <span class="token keyword">from</span> <span class="token string">'alpinejs'</span><br><br><br>Alpine<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">"filterPosts"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">adminURL</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span><br>	posts<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span><br>	category<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br>    showDefault<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    showFiltered<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br><br>	<span class="token function">filterPosts</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">this</span><span class="token punctuation">.</span>showDefault <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>        <span class="token keyword">this</span><span class="token punctuation">.</span>showFiltered <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>        <span class="token keyword">this</span><span class="token punctuation">.</span>category <span class="token operator">=</span> id<span class="token punctuation">;</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><span class="token punctuation">,</span><br><br>	<span class="token function">fetchPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token keyword">var</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>		formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"action"</span><span class="token punctuation">,</span> <span class="token string">"filterPosts"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>		formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"offset"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offset<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"category"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">)</span><span class="token punctuation">;</span><br>		<span class="token punctuation">}</span><br><br>		<span class="token function">fetch</span><span class="token punctuation">(</span>adminURL<span class="token punctuation">,</span> <span class="token punctuation">{</span><br>			method<span class="token operator">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span><br>			body<span class="token operator">:</span> formData<span class="token punctuation">,</span><br>		<span class="token punctuation">}</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>            <span class="token keyword">this</span><span class="token punctuation">.</span>posts <span class="token operator">=</span> res<span class="token punctuation">.</span>posts<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br> <br>window<span class="token punctuation">.</span>Alpine <span class="token operator">=</span> Alpine<br>Alpine<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<p>Let's walk through this component:</p>
<pre class="language-js"><code class="language-js">posts<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span><br>category<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br>showDefault<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>showFiltered<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></code></pre>
<p><code>posts</code>: will contain our post data that we receive back from WordPress.</p>
<p><code>category</code>: will be the category ID from clicking a button in the sidebar.</p>
<p><code>showDefault</code>: If true, we'll show the default posts.</p>
<p><code>showFiltered</code>: If true, we'll show the filtered posts.</p>
<pre class="language-js"><code class="language-js"><span class="token function">filterPosts</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>showDefault <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>showFiltered <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>category <span class="token operator">=</span> id<span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre>
<p><code>filterPosts(id)</code> takes in a category ID. It sets the current <code>category</code> to that ID and calls the <code>fetchPosts()</code> method. It's also showing the filtered posts and hiding the default ones.</p>
<pre class="language-js"><code class="language-js"><span class="token function">fetchPosts</span><span class="token punctuation">(</span><span class="token parameter">category</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"action"</span><span class="token punctuation">,</span> <span class="token string">"filterPosts"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"category"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token function">fetch</span><span class="token punctuation">(</span>adminURL<span class="token punctuation">,</span> <span class="token punctuation">{</span><br>        method<span class="token operator">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span><br>        body<span class="token operator">:</span> formData<span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        <span class="token keyword">this</span><span class="token punctuation">.</span>posts <span class="token operator">=</span> res<span class="token punctuation">.</span>posts<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p><code>fetchPosts(category)</code> is responsible for making an API call to WordPress. We give WordPress a category ID and we get back a list of blog posts. We can add data to our API call with <code>FormData()</code>.</p>
<p>Here we prep our form data:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">var</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Then we add to that data with a key/value pair:</p>
<pre class="language-js"><code class="language-js">formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"action"</span><span class="token punctuation">,</span> <span class="token string">"filterPosts"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><code>action</code> is the key and <code>filterPosts</code> is the value.</p>
<p><code>filterPosts</code> is the name of a PHP function we'll create soon that handles the request made from our <code>fetchPosts()</code> method.</p>
<p>If there's a category ID set, we can add <code>category</code> as the key in our form data and the ID as the value.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"category"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>When <code>fetchPosts()</code> is called is tells WordPress:</p>
<ol>
<li>Run the PHP function name <code>filterPosts</code></li>
<li>And pass into that function a <code>category</code> from our category ID</li>
</ol>
<h3>Query Posts API</h3>
<p>Earlier you should have created <code>inc/query-posts.php</code> and required it in <code>functions.php</code>.</p>
<pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><span class="token comment">// the ajax function</span><br><span class="token function">add_action</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'wp_ajax_filterPosts'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'filterPosts'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">add_action</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'wp_ajax_nopriv_filterPosts'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'filterPosts'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function-definition function">filterPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br>    <span class="token variable">$response</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>        <span class="token string single-quoted-string">'posts'</span> <span class="token operator">=></span> <span class="token string double-quoted-string">""</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    <span class="token variable">$filter_args</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><br>        <span class="token string single-quoted-string">'posts_per_page'</span> <span class="token operator">=></span> <span class="token number">10</span><span class="token punctuation">,</span><br>        <span class="token string single-quoted-string">'post_status'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'publish'</span><span class="token punctuation">,</span><br>        <span class="token string single-quoted-string">'post_type'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'post'</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'category'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token variable">$filter_args</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'cat'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'category'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token variable">$filter_query</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WP_Query</span><span class="token punctuation">(</span><span class="token variable">$filter_args</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$filter_query</span><span class="token operator">-></span><span class="token function">have_posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">:</span><br>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token variable">$filter_query</span><span class="token operator">-></span><span class="token function">have_posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token variable">$filter_query</span><span class="token operator">-></span><span class="token function">the_post</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token variable">$response</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'posts'</span><span class="token punctuation">]</span> <span class="token operator">.=</span> <span class="token function">load_template_part</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/template-parts/posts-filter/single-post'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">endwhile</span><span class="token punctuation">;</span><br>        <span class="token function">wp_reset_postdata</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">endif</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">echo</span> <span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$response</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>Let's break this down:</p>
<p>These two actions allow us to call the <code>filterPosts()</code> PHP function asynchronously on the front-end.</p>
<pre class="language-php"><code class="language-php"><span class="token function">add_action</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'wp_ajax_filterPosts'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'filterPosts'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">add_action</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'wp_ajax_nopriv_filterPosts'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'filterPosts'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Now we prep that response that holds our <code>posts</code>. It's in an array so that we can add more data to our reponse if we expand our code and add new features.</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$response</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>    <span class="token string single-quoted-string">'posts'</span> <span class="token operator">=></span> <span class="token string double-quoted-string">""</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>
<p>In order to query posts we need to pass in arguments. <code>$filter_args</code> is pretty standard and self explanatory. If our request contains a category ID (<code>$_POST['category']</code>), we add a category filter to our args.</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$filter_args</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><br>    <span class="token string single-quoted-string">'posts_per_page'</span> <span class="token operator">=></span> <span class="token number">10</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'post_status'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'publish'</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'post_type'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'post'</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'category'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$filter_args</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'cat'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'category'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>Finally, we loop our query and return our posts with the posts template.</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$filter_query</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WP_Query</span><span class="token punctuation">(</span><span class="token variable">$filter_args</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$filter_query</span><span class="token operator">-></span><span class="token function">have_posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">:</span><br>    <span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><br>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token variable">$filter_query</span><span class="token operator">-></span><span class="token function">have_posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token variable">$filter_query</span><span class="token operator">-></span><span class="token function">the_post</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token variable">$response</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'posts'</span><span class="token punctuation">]</span> <span class="token operator">.=</span> <span class="token function">load_template_part</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/template-parts/posts-filter/single-post'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">endwhile</span><span class="token punctuation">;</span><br>    <span class="token function">wp_reset_postdata</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">endif</span><span class="token punctuation">;</span><br><br><span class="token keyword">echo</span> <span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$response</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">die</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3>Helper function for loading templates</h3>
<p>WordPress has a <code>get_template_part()</code> function for returning a template in a loop, but this function doesn't allow us to save the response to our <code>$response['posts]</code> variable.</p>
<p>The solution is to create a wrapper that allows to do just that:</p>
<p>You can create the <code>load_template_part()</code> function and place it in your <code>functions.php</code> or in another place that makes sense.</p>
<pre class="language-php"><code class="language-php"><span class="token keyword">function</span> <span class="token function-definition function">load_template_part</span><span class="token punctuation">(</span><span class="token variable">$template_name</span><span class="token punctuation">,</span> <span class="token variable">$part_name</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">,</span> <span class="token variable">$args</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br>    <span class="token function">ob_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">get_template_part</span><span class="token punctuation">(</span><span class="token variable">$template_name</span><span class="token punctuation">,</span> <span class="token variable">$part_name</span><span class="token punctuation">,</span> <span class="token variable">$args</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token variable">$var</span> <span class="token operator">=</span> <span class="token function">ob_get_contents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">ob_end_clean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token variable">$var</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2>Connecting Category Buttons to Alpine</h2>
<p>When you click a category button, we need to call our <code>filterPosts(id)</code> method and pass in that category's ID.</p>
<p>Let's go back to the <code>&lt;aside&gt;</code> that holds our category buttons. We'll be updating the <code>&lt;li&gt;</code> and <code>&lt;button&gt;</code> in our loop.</p>
<pre class="language-php"><code class="language-php"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>category == <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token variable">$category</span><span class="token operator">-></span><span class="token property">term_id</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span> ? <span class="token punctuation">'</span>bg-slate-100<span class="token punctuation">'</span> : <span class="token punctuation">'</span><span class="token punctuation">'</span><span class="token punctuation">"</span></span><br>    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hover:bg-slate-100 my-1 px-4 py-2 -ml-4 rounded-md<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <br>        <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>filterPosts(<span class="token php language-php"><span class="token delimiter important">&lt;?=</span> <span class="token variable">$category</span><span class="token operator">-></span><span class="token property">term_id</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span>)<span class="token punctuation">"</span></span><br>        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-xl text-slate-800 w-full text-left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>            <span class="token php language-php"><span class="token delimiter important">&lt;?=</span> <span class="token function">esc_html</span><span class="token punctuation">(</span> <span class="token variable">$category</span><span class="token operator">-></span><span class="token property">name</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></code></pre>
<p>We've made two changes:</p>
<ol>
<li>Style the <code>&lt;li&gt;</code> if the category is active:<pre class="language-php"><code class="language-php">:class="category == <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token variable">$category</span><span class="token operator">-></span><span class="token property">term_id</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span> ? 'bg-slate-100' : ''"</code></pre>
</li>
<li>Call <code>filterPosts()</code> when the button is clicked<pre class="language-php"><code class="language-php">@click="filterPosts(<span class="token php language-php"><span class="token delimiter important">&lt;?=</span> <span class="token variable">$category</span><span class="token operator">-></span><span class="token property">term_id</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span>)"</code></pre>
</li>
</ol>
<h3>Display the fitlered posts</h3>
<p>Now let's display the filtered posts that we received:</p>
<pre class="language-php"><code class="language-php"><span class="token comment">&lt;!-- Posts Column --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>w-3/4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token comment">&lt;!-- Default posts query --></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">x-show.important</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>showDefault<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>grid grid-cols-2 gap-6<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>        <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token function">get_template_part</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'template-parts/posts-filter/default-query'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><br>    <span class="token comment">&lt;!-- Filtered posts --></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">x-show.important</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>showFiltered<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>grid grid-cols-2 gap-6<span class="token punctuation">"</span></span> <span class="token attr-name">x-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>posts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>Changes we've made:</p>
<ol>
<li>We've added <code>x-show.important=&quot;showDefault&quot;</code> to our default posts</li>
<li>We've added in our filtered posts</li>
</ol>
<p>Alpine's <code>x-show</code> allows us to conditionally show an element based on a value. In our case, when the page initially loads, <code>showDefault</code> equals <code>true</code> and becomes <code>false</code> when the user clicks a category button. If the condition in <code>x-show</code> evaluates to false, the element is hidden with <code>display: none;</code>.</p>
<p>We're using the <code>important</code> modifier on <code>x-show</code>, because both divs have the class <code>grid</code> which is a display property and it conflicts with <code>display: none;</code> if the element should be hidden. Adding <code>important</code> makes <code>x-show</code> take precedence.</p>
<h2>Final result</h2>
<p>Once we're done, we should be able to click a category in the sidebar to retrieve and display a filtered list of posts.</p>
<div style="position: relative; padding-bottom: 61.32879045996593%; height: 0;"><iframe src="https://www.loom.com/embed/1d69642a8ec54a2e9231fe324143f1af" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></iframe></div>
<h2>Additional Improvements</h2>
<p>I can think of two ways to improve this feature:</p>
<ol>
<li>When fetching posts from WordPress display a skeleton loader until the results are ready.</li>
<li>Add in a &quot;Load More&quot; button - Currently we only retrieve 10 mosts at a time with no way of viewing any more.</li>
</ol>
<p>Let's build this together in <a href="/wordpress/skeleton-loader">the next lesson 👉</a></p>
<aside 
  x-data="visibleNavHighlighter" 
  x-on:scroll.window.throttle.50ms="onScroll()" 
  x-cloak>
  <div class="fixed mt-20 right-0 bottom-0 hidden w-64 overflow-y-auto py-8 px-6 md:top-[4rem] xl:block">
    <p class="text-base">In This Guide</p>
    <ul class="space-y-3 list-none m-0 p-0">
        <template x-for="heading in headings">
            <li class="text-base p-0" :class="if (heading.tagName.toLowerCase() === 'h3') { return 'ml-4' } else if (heading.tagName.toLowerCase() === 'h4') { return 'ml-8' }">
                <a :href="'#'+heading.id" class="no-underline" 
                :class="visibleHeadingId == heading.id ? 'font-medium text-orange-400 dark:text-orange-400' : 'text-slate-800 dark:text-white'" x-text="heading.innerText"></a>
            </li>
        </template>
    </ul>
  </div>
</aside>

    <div class="bg-slate-800  max-w-3xl mt-14 p-8 md:px-16 md:py-12 rounded-lg border border-slate-700 relative shadow-2xl shadow-cyan-900/40 md:flex items-center gap-12">
        <svg data-name="Group 20" xmlns="http://www.w3.org/2000/svg" class="h-20 mx-auto md:mx-none md:h-32" viewBox="0 0 226.913 104.472"><path data-name="Union 1" d="M159.849 104.038V.228h67.063v24.4h-42.109V42.79h40.03v24.4h-40.03v36.848Z" fill="#fff"></path><path data-name="Intersection 2" d="M159.973 61.117h17.43c-.094.551-.2 1.1-.307 1.638a51.646 51.646 0 0 1-3.027 9.75 51.889 51.889 0 0 1-4.788 8.822 52.313 52.313 0 0 1-6.342 7.69q-1.427 1.425-2.966 2.742Zm0-17.14v-31.16q1.536 1.315 2.966 2.744a52.312 52.312 0 0 1 6.342 7.687 51.927 51.927 0 0 1 4.792 8.823 51.623 51.623 0 0 1 3.023 9.746c.145.709.278 1.435.393 2.158Z" fill="#e5e5e5"></path><path data-name="Subtraction 6" d="M121.539 104.227a52.334 52.334 0 0 1-10.468-1.056 51.649 51.649 0 0 1-18.572-7.814 52.09 52.09 0 0 1-18.818-22.852 51.665 51.665 0 0 1-3.027-9.75 52.435 52.435 0 0 1 0-20.936 51.67 51.67 0 0 1 7.815-18.57A52.107 52.107 0 0 1 101.321 4.43a51.752 51.752 0 0 1 9.75-3.026 52.466 52.466 0 0 1 20.935 0 51.642 51.642 0 0 1 18.572 7.815 52.076 52.076 0 0 1 18.821 22.852 51.618 51.618 0 0 1 3.027 9.749c.145.71.278 1.436.394 2.158h-24.078c-.267-.837-.577-1.675-.923-2.492a29.012 29.012 0 0 0-2.682-4.94 29.162 29.162 0 0 0-12.8-10.538 29.046 29.046 0 0 0-27.58 2.681 29.176 29.176 0 0 0-10.538 12.8 29.049 29.049 0 0 0 2.68 27.58 29.173 29.173 0 0 0 12.8 10.539 29.051 29.051 0 0 0 27.584-2.682 29.227 29.227 0 0 0 7.856-7.857 29.034 29.034 0 0 0 3.76-7.951h23.83c-.094.551-.2 1.1-.307 1.638a51.661 51.661 0 0 1-7.815 18.572 52.09 52.09 0 0 1-22.852 18.821 51.636 51.636 0 0 1-9.749 3.026 52.332 52.332 0 0 1-10.467 1.052Z" fill="#fff"></path><path data-name="Intersection 1" d="M101.422 99.906a51.612 51.612 0 0 1-8.778-4.765A51.84 51.84 0 0 1 73.92 72.404a51.356 51.356 0 0 1-3.011-9.7 52.158 52.158 0 0 1 0-20.831 51.333 51.333 0 0 1 3.011-9.7q.998-2.362 2.238-4.625l30.231 74.163a51.327 51.327 0 0 1-4.967-1.805Z" fill="#e5e5e5"></path><path data-name="Subtraction 1" d="M101.282 104.472H73.234l-5.713-15.586H32.2l-5.713 15.585H0L41.032 0h17.66l42.59 104.471ZM49.861 41.2l-8.829 24.138h17.66L49.861 41.2Z" fill="#fff"></path></svg>
        <div class="w-full">
            <h3 class="text-xl ignore-toc text-center font-medium mt-8 md:text-left md:m-0">Get The Free ACF Blocks Mini Course</h3>
            <script src="https://f.convertkit.com/ckjs/ck.5.js"></script>
            <form action="https://app.convertkit.com/forms/3686824/subscriptions" class="seva-form formkit-form" method="post" data-sv-form="3432284" data-uid="52a76ab010" data-format="inline" data-version="5" data-options="{&quot;settings&quot;:{&quot;after_subscribe&quot;:{&quot;action&quot;:&quot;message&quot;,&quot;success_message&quot;:&quot;Success! Now check your email to confirm your subscription.&quot;,&quot;redirect_url&quot;:&quot;&quot;},&quot;analytics&quot;:{&quot;google&quot;:null,&quot;fathom&quot;:null,&quot;facebook&quot;:null,&quot;segment&quot;:null,&quot;pinterest&quot;:null,&quot;sparkloop&quot;:null,&quot;googletagmanager&quot;:null},&quot;modal&quot;:{&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15},&quot;powered_by&quot;:{&quot;show&quot;:true,&quot;url&quot;:&quot;https://convertkit.com/features/forms?utm_campaign=poweredby&amp;utm_content=form&amp;utm_medium=referral&amp;utm_source=dynamic&quot;},&quot;recaptcha&quot;:{&quot;enabled&quot;:false},&quot;return_visitor&quot;:{&quot;action&quot;:&quot;show&quot;,&quot;custom_content&quot;:&quot;&quot;},&quot;slide_in&quot;:{&quot;display_in&quot;:&quot;bottom_right&quot;,&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15},&quot;sticky_bar&quot;:{&quot;display_in&quot;:&quot;top&quot;,&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15}},&quot;version&quot;:&quot;5&quot;}" min-width="400">
                <div data-style="clean">
                    <ul class="formkit-alert formkit-alert-error" data-element="errors" data-group="alert"></ul>
                    <div data-element="fields" data-stacked="false" class="flex flex-col md:flex-row items-center gap-4 mt-3 w-full">
                        <input class="formkit-input px-3 py-3 max-w-xs w-full text-base rounded-md min-w-0 text-white placeholder:text-slate-200 bg-slate-900" name="email_address" aria-label="Email Address" placeholder="Email Address" required="" type="email">

                        <button data-element="submit" class="formkit-submit formkit-submit text-base bg-cyan-300 px-3 py-3 rounded-md w-full max-w-xs md:w-auto">
                            <div class="formkit-spinner">
                                <div></div>
                                <div></div>
                                <div></div>
                            </div><span class="text-cyan-900 whitespace-nowrap">Keep me updated</span>
                        </button>
                    </div>
                </div>
            </form>
            
        
            <a href="https://www.modernwpdev.co/#acf" class="mt-8 md:mt-5 flex items-center md:text-left justify-center md:justify-start gap-2 no-underline text-white text-opacity-70 transition-colors hover:text-opacity-100">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>

                <span>Checkout the lesson outline</span>
            </a>
            
        </div>
        <div class="absolute top-0 left-11 right-20 h-px bg-gradient-to-r from-slate-800/0 via-cyan-400 to-slate-800/0"></div>
        <div class="absolute -bottom-px left-11 right-20 h-px bg-gradient-to-r from-slate-800/0 via-cyan-400 to-slate-800/0"></div>
    </div>
</article>

<div class=" max-w-screen-md mx-auto px-4 mt-12">
    <div id="disqus_thread"></div>
</div>
<script>
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://joeyfarruggio-com.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </main>

    <footer class="py-16 bg-slate-900 mt-16"> 

    </footer>
    <script defer src="/js/app.min.js"></script>
</body>
</html>