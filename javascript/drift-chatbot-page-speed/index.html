<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Drift Chat Bot – Optimize for Page Speed</title>
    <meta name="description" content="" />
    <script>
    partytown = {
        debug: true,
        logCalls: true,
        logSetters: true,
        logGetters: true,
        forward: ['dataLayer.push']
    };
    </script>
    <script>
        // On page load or when changing themes, best to add inline in `head` to avoid FOUC
        try {
            if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark')
                document.documentElement.style.backgroundColor = "#040817";
            } else {
                document.documentElement.classList.remove('dark')
                document.documentElement.style.backgroundColor = "#fff";
            }
        } catch (_) {}
    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async type="text/partytown" src="https://www.googletagmanager.com/gtag/js?id=UA-129275479-1"></script>
    <script type="text/partytown">
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-129275479-1');
    </script>

    <link rel="stylesheet" href="/css/styles.min.css" />
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet" />
    <!-- test -->
</head>
<body x-data="app()" class="bg-white dark:bg-[#040817] transition-colors dark:text-white text-slate-800 font-body">
    <header class="max-w-screen-xl mx-auto px-4 py-4 md:py-8 text-right" x-data="{menuOpen: false}">
        <div class="hidden fixed md:static top-0 left-0 h-screen w-screen md:h-auto md:w-full z-40 pb-16 md:p-0 bg-white dark:bg-darkBG md:bg-transparent dark:md:bg-transparent md:flex md:items-center md:justify-between" :class="{'block': menuOpen, 'hidden': !menuOpen}">
            <nav class="text-center flex flex-col md:block text-2xl md:text-lg md:space-x-6">
                <a href="/" class="block md:inline dark:text-slate-500  dark:hover:text-white text-slate-900 transition-colors hover:text-orange-400  no-underline  px-4 py-3 rounded-lg">Home</a>
                <a href="/contact" class="block md:inline dark:text-slate-500  dark:hover:text-white text-slate-900 transition-colors hover:text-orange-400  no-underline  px-4 py-3 rounded-lg">Contact</a>
                <a href="/blog" class="block md:inline dark:text-slate-500  dark:hover:text-white text-slate-900 transition-colors hover:text-orange-400  no-underline  px-4 py-3 rounded-lg">Blog</a>
            </nav>
            <button x-on:click="toggleTheme()" class="print:hidden relative flex items-center mx-auto md:mx-0 mt-32 md:mt-0 justify-between border dark:border-slate-800 bg-white dark:bg-slate-900 border-slate-200 px-4 py-2 rounded-full outline-none focus:outline-none shadow-none">
                <div class="h-full aspect-square border-slate-300 bg-white dark:bg-slate-800 rounded-full shadow-lg absolute top-0 left-0 dark:-ml-10 dark:left-full transition-transform"></div>
                <svg xmlns="http://www.w3.org/2000/svg" class="relative h-6 w-6 dark:text-slate-400 text-orange-400 -ml-2" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="relative h-6 w-6 dark:text-orange-400 text-slate-300 ml-4 -mr-2" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>
            </button>
        </div>
        <button class="print:hidden  border-none ml-full inline-block p-4 relative z-50 md:hidden" @click="menuOpen = !menuOpen">
            <svg xmlns="http://www.w3.org/2000/svg" x-show="!menuOpen" class="h-6 w-6" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16" /></svg>
            <svg xmlns="http://www.w3.org/2000/svg" x-show="menuOpen" x-cloak class="h-6 w-6" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
        </button>
    </header>
    
    <main data-cms-content-wrapper="/src/_includes/layouts/base.njk">
        <article id="post" class="prose lg:prose-xl max-w-screen-md mx-auto px-4 mt-12" :class="{'prose-invert': dark}">
    <h1 class="dark:text-orange-400 text-4xl text-highlight-orange">Drift Chat Bot – Optimize for Page Speed</h1>
    <span class="flex items-center space-x-4 mt-4 text-gray-400">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
        <time datetime="2020-07-01">01 Jul 2020</time>
    </span>
    <div class="mt-16"></div>   
    <p>Update July 9th 2020: I’ve created a WP plugin called <a href="https://wordpress.org/plugins/chatbot-lazy-loader/">Chatbot Lazy Loader</a> to handle the optimization of your chatbot. It even hit #2 on Product Hunt.</p>
<p><img src="/images/chatbot-slide-1.png" alt="chatbot page speed!" title="chatbot page speed!">
<a href="https://www.producthunt.com/posts/chatbot-lazy-loader?utm_source=badge-top-post-badge&amp;utm_medium=badge&amp;utm_souce=badge-chatbot-lazy-loader" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://api.producthunt.com/widgets/embed-image/v1/top-post-badge.svg?post_id=213951&amp;theme=light&amp;period=daily" alt="Chatbot Lazy Loader - Eliminate page speed issues caused by chatbots on WordPress | Product Hunt Embed" style="width: 250px; height: 54px;" width="250px" height="54px"></a></p>
<p>When we’re considering JS dependent functionality, we need to weight its benefits against its costs. Chat bots are powerful support and lead gen tools, but like any JavaScript resource it adds weight to your web page, slows TTI, and delays other resources from loading.</p>
<p>We should also consider smarter ways of including our JavaScript. The easiest optimization to make is to only include JavaScript on the pages that require it. That’s simple enough, right? But with Chatbots, it’s less of a <code>page specific issue</code> and a <code>timed intent issue</code>.</p>
<p>So if you want to keep your Drift chat bot, but avoid the hit to your page speed, here’s how to optimize the way you include Drift’s JavaScript.</p>
<h2>Put your visitors first</h2>
<p>Think of the way visitors are using your website. It’s a safe assumption to make that most visitors are not using a chatbot every time they view a page on your website. They are most likely going to hit an entry point, move through a flow, and at some point they may have a question that prompts them to use a chatbot.</p>
<p>So let’s not make them download that JavaScript when they don’t need it. Instead we can allow visitors to download that JavaScript on-demand, that is – only when they want to use the chatbot.</p>
<h2>Drift’s standard install instructions</h2>
<p>When you create a Drift account, you’re given this JavaScript snippet with instructions to add it to the <head> of your website:</p>
<pre class="language-javascript"><code class="language-javascript">Inline Drift JavaScript<br><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Start <span class="token keyword">of</span> Async Drift Code <span class="token operator">--</span><span class="token operator">></span><br><span class="token operator">&lt;</span>script<span class="token operator">></span><br><span class="token string">"use strict"</span><span class="token punctuation">;</span><br><br><span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">var</span> t <span class="token operator">=</span> window<span class="token punctuation">.</span>driftt <span class="token operator">=</span> window<span class="token punctuation">.</span>drift <span class="token operator">=</span> window<span class="token punctuation">.</span>driftt <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>t<span class="token punctuation">.</span>init<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>invoked<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>console <span class="token operator">&amp;&amp;</span> console<span class="token punctuation">.</span>error <span class="token operator">&amp;&amp;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Drift snippet included twice."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    t<span class="token punctuation">.</span>invoked <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span>methods <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">"identify"</span><span class="token punctuation">,</span> <span class="token string">"config"</span><span class="token punctuation">,</span> <span class="token string">"track"</span><span class="token punctuation">,</span> <span class="token string">"reset"</span><span class="token punctuation">,</span> <span class="token string">"debug"</span><span class="token punctuation">,</span> <span class="token string">"show"</span><span class="token punctuation">,</span> <span class="token string">"ping"</span><span class="token punctuation">,</span> <span class="token string">"page"</span><span class="token punctuation">,</span> <span class="token string">"hide"</span><span class="token punctuation">,</span> <span class="token string">"off"</span><span class="token punctuation">,</span> <span class="token string">"on"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <br>    t<span class="token punctuation">.</span><span class="token function-variable function">factory</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">return</span> n<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span>methods<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      t<span class="token punctuation">[</span>e<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">factory</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function-variable function">load</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token number">3e5</span><span class="token punctuation">,</span> n <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> e<span class="token punctuation">)</span> <span class="token operator">*</span> e<span class="token punctuation">,</span> o <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      o<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"text/javascript"</span><span class="token punctuation">,</span> o<span class="token punctuation">.</span>async <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> o<span class="token punctuation">.</span>crossorigin <span class="token operator">=</span> <span class="token string">"anonymous"</span><span class="token punctuation">,</span> o<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">"https://js.driftt.com/include/"</span> <span class="token operator">+</span> n <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> t <span class="token operator">+</span> <span class="token string">".js"</span><span class="token punctuation">;</span><br>      <span class="token keyword">var</span> i <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>      i<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>drift<span class="token punctuation">.</span><span class="token constant">SNIPPET_VERSION</span> <span class="token operator">=</span> <span class="token string">'0.3.1'</span><span class="token punctuation">;</span><br>drift<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'hrypg4pnzn33'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> End <span class="token keyword">of</span> Async Drift Code <span class="token operator">--</span><span class="token operator">></span></code></pre>
<p>I ran this inline Drift code trough Lighthouse on a simple page driftand this is what I got:</p>
<p><img src="/images/drift-test-1.png" alt="chatbot page speed!" title="chatbot page speed!"></p>
<p>Not too impressive, especially since the the page is very thin and the rest of the site scores in the upper 90s/100.</p>
<p>So let’s see what we can do to improve things.</p>
<h2>Optimizing Drift for page speed</h2>
<p>Instead of loading that JavaScript on every page, let’s only add the JavaScript when someone clicks a “Chat with us” button.</p>
<h3>Step 1 – Add Drift’s JavaScript as a function</h3>
<pre class="language-javascript"><code class="language-javascript">Custom Drift JavaScript<br><span class="token keyword">function</span> <span class="token function">LoadDriftWidget</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token comment">// Paste all of the JavaScript in here</span><br><span class="token punctuation">}</span></code></pre>
<p>Then, somewhere on your page add a button that, when clicked, calls the LoadDriftWidget() function.</p>
<pre class="language-html"><code class="language-html">An HTML Button<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>a-unique-id<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">LoadDriftWidget</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>Let’s Chat<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>Clicking that button will download the Drift JavaScript on-demand and then launch the chat widget. And this is great. It’s much better than what we had before.</code></pre>
<p>But we can do better.</p>
<p>With that implementation, what happens when someone clicks the button?</p>
<ol>
<li>You click the button</li>
<li>Wait a second or so</li>
<li>Chat bot appears</li>
</ol>
<p>That’s fine if the chat bot appears very quickly, but if there’s even just a slight delay it may appear that the button is broken. What we want to do is give the visitor feedback so that they know that clicking the button worked and that the chat bot is loading.</p>
<h3>Step 2 – Provide feedback</h3>
<p>The HTML button should have a unique ID. That’s easy enough to automate in JavaScript or PHP. And we’ll use that ID when the visitor clicks the button:</p>
<pre class="language-javascript"><code class="language-javascript">Adding a loading indicator<br><span class="token comment">// Code to run when a Drift button is clicked</span><br><span class="token keyword">function</span> <span class="token function">LoadDriftWidget</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Get the initial button text and store it for later</span><br>    <span class="token keyword">var</span> text <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<span class="token punctuation">;</span><br><br>    <span class="token comment">// Change the button text to a loading indicator</span><br>    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"loading..."</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// ... the rest of the Drift JavaScript</span><br><br>    <span class="token comment">// Once Drift is loaded and ready</span><br>    drift<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'ready'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">api<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>       <span class="token comment">// Reset the button text to its initial state</span><br>      document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> text<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br><span class="token punctuation">}</span></code></pre>
<p>Now when someone clicks the button, the button text changes to “loading…” and as soon as the chatbot appears it changes back to its original state.</p>
<p>Again, much better. But I noticed one small hick up in this implementation. If someone were to click the chatbot a second time, after the script has already loaded, nothing happens. The Drift JavaScript has already been loaded, so there’s nothing we should expect this code to do.</p>
<h3>Step 3 – Launch the Drift sidebar</h3>
<p>Drift has example JavaScript to interact with the chat widget. One of the features is the ability to programmatically open and close the sidebar widget.</p>
<p>So here’s how I changed the code to open the sidebar widget if the chat button was clicked two or more times:</p>
<pre class="language-javascript"><code class="language-javascript">Open Drift Sidebar Widget<br><span class="token comment">// Initiate the counter</span><br><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><br><span class="token comment">// Code to run when a Drift button is clicked</span><br><span class="token keyword">function</span> <span class="token function">LoadDriftWidget</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Increment the counter</span><br>    i<span class="token operator">++</span><span class="token punctuation">;</span><br>  <br>    <span class="token comment">// ... rest of the example JavaScript</span><br><br>    <span class="token comment">// Once Drift is loaded and ready</span><br>    drift<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'ready'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">api<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <br>        <span class="token comment">// Reset the button text to its initial state</span><br>        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> text<span class="token punctuation">;</span><br><br>        <span class="token comment">// If a Drift button is clicked more than once, open the chat sidebar</span><br>        <span class="token comment">// If this is not the first time the button was clicked, open the sidebar</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">>=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            api<span class="token punctuation">.</span>sidebar<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>I replaced the inline Drift implementation with our new optimized implementation:</p>
<p><img src="/images/drift-test-2.png" alt="chatbot page speed!" title="chatbot page speed!"></p>
<p>Obviously that’s much better considering the fact that this was 3 minutes worth of work.</p>
<p>Here’s the final code in full:</p>
<pre class="language-javascript"><code class="language-javascript">Full Optimized Drift JavaScript<br><span class="token string">"use strict"</span><span class="token punctuation">;</span><br><br><span class="token comment">// Initiate the counter</span><br><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><br><span class="token comment">// Code to run when a Drift button is clicked</span><br><span class="token keyword">function</span> <span class="token function">LoadDriftWidget</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// Increment the counter</span><br>  i<span class="token operator">++</span><span class="token punctuation">;</span><br>  <br>  <span class="token comment">// Get the intial button text</span><br>  <span class="token keyword">var</span> text <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<span class="token punctuation">;</span><br><br>  <span class="token comment">// Change the button text to a loading indicator</span><br>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"loading..."</span><span class="token punctuation">;</span><br>  <br><br>  <span class="token comment">// Start Drift Widget Code</span><br>  <span class="token keyword">var</span> t <span class="token operator">=</span> window<span class="token punctuation">.</span>driftt <span class="token operator">=</span> window<span class="token punctuation">.</span>drift <span class="token operator">=</span> window<span class="token punctuation">.</span>driftt <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>t<span class="token punctuation">.</span>init<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>invoked<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      api<span class="token punctuation">.</span>sidebar<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>      <span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>console <span class="token operator">&amp;&amp;</span> console<span class="token punctuation">.</span>error <span class="token operator">&amp;&amp;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Drift snippet included twice."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    t<span class="token punctuation">.</span>invoked <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span>methods <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">"identify"</span><span class="token punctuation">,</span> <span class="token string">"config"</span><span class="token punctuation">,</span> <span class="token string">"track"</span><span class="token punctuation">,</span> <span class="token string">"reset"</span><span class="token punctuation">,</span> <span class="token string">"debug"</span><span class="token punctuation">,</span> <span class="token string">"show"</span><span class="token punctuation">,</span> <span class="token string">"ping"</span><span class="token punctuation">,</span> <span class="token string">"page"</span><span class="token punctuation">,</span> <span class="token string">"hide"</span><span class="token punctuation">,</span> <span class="token string">"off"</span><span class="token punctuation">,</span> <span class="token string">"on"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <br>    t<span class="token punctuation">.</span><span class="token function-variable function">factory</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">return</span> n<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span>methods<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      t<span class="token punctuation">[</span>e<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">factory</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function-variable function">load</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token number">3e5</span><span class="token punctuation">,</span> n <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> e<span class="token punctuation">)</span> <span class="token operator">*</span> e<span class="token punctuation">,</span> o <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      o<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"text/javascript"</span><span class="token punctuation">,</span> o<span class="token punctuation">.</span>async <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> o<span class="token punctuation">.</span>crossorigin <span class="token operator">=</span> <span class="token string">"anonymous"</span><span class="token punctuation">,</span> o<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">"https://js.driftt.com/include/"</span> <span class="token operator">+</span> n <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> t <span class="token operator">+</span> <span class="token string">".js"</span><span class="token punctuation">;</span><br>      <span class="token keyword">var</span> i <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>      i<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <br>  drift<span class="token punctuation">.</span><span class="token constant">SNIPPET_VERSION</span> <span class="token operator">=</span> <span class="token string">'0.3.1'</span><span class="token punctuation">;</span><br>  <span class="token comment">// Add your own Drift ID here</span><br>  drift<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'XXXXXXXXXX'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token comment">// Once Drift is loaded and ready</span><br>  drift<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'ready'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">api<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <br>    <span class="token comment">// Reset the button text to its initial state</span><br>    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> text<span class="token punctuation">;</span><br><br>    <span class="token comment">// If a Drift button is clicked more than once, open the chat sidebar</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">>=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      api<span class="token punctuation">.</span>sidebar<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>

</article>

<div class=" max-w-screen-md mx-auto px-4 mt-12">
    <div id="disqus_thread"></div>
</div>
<script>
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://joeyfarruggio-com.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </main>

    <footer class="py-16 bg-slate-900 mt-16"> 

    </footer>
    <script defer src="/js/app.min.js"></script>
</body>
</html>