<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>5-Step Guide To Creating a Posts Loop Block in Gutenberg with ACF and block.json</title>
    <meta name="description" content="" />


    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-129275479-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-129275479-1');
    </script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-D045T9GYJG"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-D045T9GYJG');
    </script>

    <link rel="stylesheet" href="/css/tailwind.min.css" />
    <link rel="stylesheet" href="/css/nightowl.min.css" />
    
    
    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="5-Step Guide To Creating a Posts Loop Block in Gutenberg with ACF and block.json" />
    <meta property="og:url" content="https://joeyfarruggio.com/wordpress/custom-post-loop-as-a-gutenberg-block/" />
    <meta property="og:description" content="Build a custom block to loop through your WordPress blog posts with Advanced Custom Fields and block.json." />
    <meta property="twitter:description" content="Build a custom block to loop through your WordPress blog posts with Advanced Custom Fields and block.json." />
    
        <meta property="og:image" content="https://joeyfarruggio.com/images/avatar-small.jpg" />
    
    <meta property="og:type" content="article" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" ontent="https://joeyfarruggio.com/wordpress/custom-post-loop-as-a-gutenberg-block/" />
    <meta property="twitter:title" content="5-Step Guide To Creating a Posts Loop Block in Gutenberg with ACF and block.json" />
    <meta property="twitter:description" content="Build a custom block to loop through your WordPress blog posts with Advanced Custom Fields and block.json." />
    
        <meta property="twitter:image" content="https://joeyfarruggio.com/images/avatar-small.jpg" />
    

    <link rel="canonical" href="https://joeyfarruggio.com/wordpress/custom-post-loop-as-a-gutenberg-block/" />
</head>
<body x-data="app()" class="bg-white dark:bg-[#040817] transition-colors dark:text-white text-slate-800 font-body">
    <header class="max-w-screen-xl mx-auto px-4 py-4 md:py-8 text-right" x-data="{menuOpen: false}">
        <div class="hidden fixed md:static top-0 left-0 h-screen w-screen md:h-auto md:w-full z-40 pb-16 md:p-0 bg-white dark:bg-darkBG md:bg-transparent dark:md:bg-transparent md:flex md:items-center md:justify-between" :class="{'block': menuOpen, 'hidden': !menuOpen}">
            <nav class="text-center flex flex-col md:block text-2xl md:text-lg md:space-x-6">
                <a href="/" class="block md:inline dark:text-slate-500  dark:hover:text-white text-slate-900 transition-colors hover:text-orange-400  no-underline  px-4 py-3 rounded-lg">Home</a>
                <a href="/work-with-me" class="block md:inline dark:text-slate-500  dark:hover:text-white text-slate-900 transition-colors hover:text-orange-400  no-underline  px-4 py-3 rounded-lg">Work With Me</a>
                <a href="/coaching" class="block md:inline dark:text-slate-500  dark:hover:text-white text-slate-900 transition-colors hover:text-orange-400  no-underline  px-4 py-3 rounded-lg">WP Dev Coaching</a>
                <a href="/blog" class="block md:inline dark:text-slate-500  dark:hover:text-white text-slate-900 transition-colors hover:text-orange-400  no-underline  px-4 py-3 rounded-lg">Blog</a>

            </nav>
            
        </div>
        <button class="print:hidden  border-none ml-full inline-block p-4 relative z-50 md:hidden" @click="menuOpen = !menuOpen">
            <svg xmlns="http://www.w3.org/2000/svg" x-show="!menuOpen" class="h-6 w-6" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16" /></svg>
            <svg xmlns="http://www.w3.org/2000/svg" x-show="menuOpen" x-cloak class="h-6 w-6" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
        </button>
    </header>
    
    <main data-cms-content-wrapper="/src/_includes/layouts/base.njk">
        <article id="post" class="prose prose-invert lg:prose-xl max-w-screen-md mx-auto px-4 mt-12">
    <h1 class="dark:text-orange-400 text-4xl text-highlight-orange">5-Step Guide To Creating a Posts Loop Block in Gutenberg with ACF and block.json</h1>
    <p class=" text-lg mt-4 leading-relaxed">Build a custom block to loop through your WordPress blog posts with Advanced Custom Fields and block.json.</p>
    <span class="flex items-center space-x-4 mt-4 text-gray-400">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
        <time datetime="2022-10-05">05 Oct 2022</time>
    </span>
    <div class="mt-16"></div>   
    <blockquote>
<p>This post was updated on October, 5th 2022 to reflect changes in how we register blocks in WordPress 6.0 and Advanced Custom Fields 6.0.</p>
</blockquote>
<h2 id="ignore-toc" class="ignore-toc" x-intersect:enter="$store.showToc = false" x-intersect:leave="$store.showToc = true">Steps in this guide:</h2>
<ol>
<li><a href="#create-fields">Creating our fields</a></li>
<li><a href="#register-block">Register our blocks with block.json</a></li>
<li><a href="#block-data">Handle our block data</a></li>
<li><a href="#render-template">Create the block render template</a></li>
<li><a href="#using-block">Using the block</a></li>
</ol>
<h2 id="create-fields">Creating our fields</h2>
<p>Sometimes I like to start with creating my field groups because it gets me thinking about how I’m going to use the block. I know this block will interface with the <a href="https://developer.wordpress.org/reference/classes/wp_query/" target="_blank">WP_Query</a> class, so a few fields immediately come to mind.</p>
<ol>
<li><strong>Selection Type</strong> <br/>We should be able to display the most recent posts or hand pick them.</li>
<li><strong>Category</strong>  <br/>If we’re displaying the most recent posts, we should be able to limit them to a specific category.</li>
<li><strong>Limit</strong>  <br/>If we’re displaying the most recent posts, we should be able to set a limit for how many are returned.</li>
<li><strong>Select Posts</strong>  <br/>If we choose &quot;select posts&quot;, we'll want a relationship field to hand pick our posts from a list.</li>
</ol>
<p><img src="/images/block-guide-field-group.jpg" alt="&quot;Field Group&quot;" title="Creating the block's field group"></p>
<p>The <code>Category</code> and <code>Limit</code> fields are conditionally displayed if the <code>Selection Type</code> is &quot;recent&quot;. Likewise, the <code>Select Posts</code> field is only displayed if the <code>Selection type</code> is &quot;select posts&quot;.</p>
<p>Want to import this field group into ACF Pro? <a href="https://gist.github.com/joseph-farruggio/72c69968b23c6701932af84690516240" target="_blank">Get the JSON</a> – Once you've imported the JSON into ACF, make sure to update the location rules to match your block name after you register your block.</p>
<h2 id="register-block">Register the block</h2>
<p>Since WP 6.0, the recommended way of registering blocks is <a href="https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/">via block.json</a>. This is a big deal, because keeping our ACF blocks as close to core as possible allows us to take advantage of many native block features.</p>
<p>You can register blocks from a plugin or your theme. For simplicity, and to make this guide more accessible to beginners, I’ll be doing this directly in my theme. Go ahead and stub out the following structure:</p>
<pre class="language-text"><code class="language-text">/theme-root<br>│<br>└─── /blocks<br>│   │   register-blocks.php<br>│   │<br>│   └─── /posts-loop<br>│       │   block.json<br>│       │   block.php<br>│       │   template.php</code></pre>
<p>In <code>/blocks/posts-loop/block.json</code>, we'll configure our block:</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"posts-loop"</span><span class="token punctuation">,</span><br>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Posts Loop Block"</span><span class="token punctuation">,</span><br>    <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Displays a list of posts."</span><span class="token punctuation">,</span><br>    <span class="token property">"category"</span><span class="token operator">:</span> <span class="token string">"theme"</span><span class="token punctuation">,</span><br>    <span class="token property">"apiVersion"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span><br>    <span class="token property">"keywords"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>        <span class="token string">"posts"</span><span class="token punctuation">,</span><br>        <span class="token string">"blog"</span><br>    <span class="token punctuation">]</span><span class="token punctuation">,</span><br>    <span class="token property">"acf"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>        <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"preview"</span><span class="token punctuation">,</span><br>        <span class="token property">"renderTemplate"</span><span class="token operator">:</span> <span class="token string">"blocks/posts-loop/block.php"</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token property">"supports"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>        <span class="token property">"anchor"</span><span class="token operator">:</span> <span class="token boolean">true</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>Inside of <code>/blocks/register-blocks.php</code>, we’ll include the path to our block’s json file. This is where we’ll register all of our future blocks:</p>
<pre class="language-php"><code class="language-php"><span class="token function">register_block_type</span><span class="token punctuation">(</span> <span class="token function">get_template_directory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'/blocks/posts-loop/block.json'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>In your <code>functions.php</code> you can include the path to <code>/blocks/register-blocks.php.</code></p>
<pre class="language-php"><code class="language-php"><span class="token comment">/**<br> * Register ACF Blocks<br> */</span><br><span class="token keyword">require</span> <span class="token function">get_template_directory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'/blocks/register-blocks.php'</span><span class="token punctuation">;</span></code></pre>
<h2 id="block-data">Handle our block data</h2>
<p><code>/blocks/posts-loop/block.php</code> will serve as the <em>model / controller</em> for our block. It’s where we’ll handle all of the data that gets passed into the render template or the <em>view</em>. This helps keep things clean and organized so our logic is one place (block.php) and our front-end template (template.php) is in another.</p>
<p>Make sure to read the comments in the code sample to understand what's happening:</p>
<pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><span class="token comment">/**<br> * Posts Loop Block<br> */</span><br><br><span class="token comment">// $data is what we're going to expose to our render template</span><br><span class="token variable">$data</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><br>	<span class="token string single-quoted-string">'selection_type'</span> <span class="token operator">=></span> <span class="token function">get_field</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'selection_type'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span><br>	<span class="token string single-quoted-string">'category'</span> <span class="token operator">=></span> <span class="token function">get_field</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'category'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span><br>	<span class="token string single-quoted-string">'limit'</span> <span class="token operator">=></span> <span class="token function">get_field</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'limit'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span><br>	<span class="token string single-quoted-string">'select_posts'</span> <span class="token operator">=></span> <span class="token function">get_field</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'select_posts'</span><span class="token punctuation">)</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Dynamic block ID</span><br><span class="token variable">$block_id</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'posts-loop-block-'</span> <span class="token operator">.</span> <span class="token variable">$block</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token comment">// Check if a custom ID is set in the block editor</span><br><span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$block</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'anchor'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$block_id</span> <span class="token operator">=</span> <span class="token variable">$block</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'anchor'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Block classes</span><br><span class="token variable">$class_name</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'posts-loop-block'</span><span class="token punctuation">;</span><br><span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$block</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'class_name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$class_name</span> <span class="token operator">.=</span> <span class="token string single-quoted-string">' '</span> <span class="token operator">.</span> <span class="token variable">$block</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'class_name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// WP Query Args</span><br><span class="token variable">$queryArgs</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><br>    <span class="token string single-quoted-string">'post_type'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'post'</span><span class="token punctuation">,</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// If the selection type is "recent", check  for categories and limit</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'selection_type'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'recent'</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$queryArgs</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'category__in'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'category'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token variable">$queryArgs</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'posts_per_page'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'limit'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// If the selection type is "select", pass in the selected post IDs</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'selection_type'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'select'</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$queryArgs</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post__in'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'select_posts'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Create a new WP_Query instance</span><br><span class="token variable">$posts</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WP_Query</span><span class="token punctuation">(</span> <span class="token variable">$queryArgs</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Expose the response of WP_Query to the render template</span><br><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'posts'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$posts</span><span class="token punctuation">;</span><br><br><span class="token comment">/** <br> * Pass the block data into the template part<br> */</span> <br><br><span class="token function">get_template_part</span><span class="token punctuation">(</span><br>	<span class="token string single-quoted-string">'blocks/posts-loop/template'</span><span class="token punctuation">,</span><br>	<span class="token constant">null</span><span class="token punctuation">,</span><br>	<span class="token keyword">array</span><span class="token punctuation">(</span><br>		<span class="token string single-quoted-string">'block'</span>      <span class="token operator">=></span> <span class="token variable">$block</span><span class="token punctuation">,</span><br>		<span class="token string single-quoted-string">'is_preview'</span> <span class="token operator">=></span> <span class="token variable">$is_preview</span><span class="token punctuation">,</span><br>		<span class="token string single-quoted-string">'post_id'</span>    <span class="token operator">=></span> <span class="token variable">$post_id</span><span class="token punctuation">,</span><br><br>		<span class="token string single-quoted-string">'data'</span>       <span class="token operator">=></span> <span class="token variable">$data</span><span class="token punctuation">,</span><br>        <span class="token string single-quoted-string">'class_name'</span> <span class="token operator">=></span> <span class="token variable">$class_name</span><span class="token punctuation">,</span><br>        <span class="token string single-quoted-string">'block_id'</span>   <span class="token operator">=></span> <span class="token variable">$block_id</span><span class="token punctuation">,</span><br>	<span class="token punctuation">)</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><code>$block</code>, <code>$is_preview</code>, and <code>$post_id</code> are variables given to us by the block registration API.</p>
<p><strong>$block</strong><br>
Contains all of the attributes of our block from the block API. We have access to the block's name, description, ID, class names, and many other attributes that come from the block editor.</p>
<p><strong>$is_preview</strong><br>
Either <code>true</code> or <code>false</code> – it tells us whether the block is currently being viewed in the block editor (<code>true</code>) or the front-end (<code>false</code>).</p>
<p><strong>$post_id</strong><br>
The ID of the post or page that the block is being viewed on.</p>
<p>The other three variables, <code>$data</code>, <code>$class_name</code>, and <code>$block_id</code> are variables that we have defined ourselves.</p>
<h2 id="render-template">Create the block render template</h2>
<p>Now we can create the block’s render template: <code>/blocks/posts-loop/template.php</code>.</p>
<pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><span class="token comment">/**<br> * Block Name: Posts Loop Block<br> *<br> * Description: Displays a list of posts.<br> */</span><br><br><span class="token comment">// The block attributes</span><br><span class="token variable">$block</span> <span class="token operator">=</span> <span class="token variable">$args</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'block'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token comment">// The block data</span><br><span class="token variable">$data</span> <span class="token operator">=</span> <span class="token variable">$args</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token comment">// Dynamic block ID</span><br><span class="token variable">$block_id</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'posts-loop-block-'</span> <span class="token operator">.</span> <span class="token variable">$block</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token comment">// The block ID</span><br><span class="token variable">$block_id</span> <span class="token operator">=</span> <span class="token variable">$args</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'block_id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token comment">// The block class names</span><br><span class="token variable">$class_name</span> <span class="token operator">=</span> <span class="token variable">$args</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'class_name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token delimiter important">?></span></span><br><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token variable">$block_id</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token variable">$class_name</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token comment">&lt;!-- Our front-end template to loop the posts --></span><br>    <span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br>    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'posts'</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token function">have_posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">while</span><span class="token punctuation">(</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'posts'</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token function">have_posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'posts'</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token function">the_post</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token function">the_title</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>                    <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token function">the_excerpt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>            <span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>    <span class="token delimiter important">?></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>All of the data exposed to our block's render template is found in the <code>$args</code> variable.</p>
<p>The response of WP_Query is exposed to this render template in <code>$data['posts']</code>. This is because of the work we did in <code>/blocks/posts-loop/block.php</code>. Here's the line specifically:</p>
<pre class="language-php"><code class="language-php"><span class="token comment">// Create a new WP_Query instance</span><br><span class="token variable">$posts</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WP_Query</span><span class="token punctuation">(</span> <span class="token variable">$queryArgs</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Expose the response of WP_Query to the render template</span><br><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'posts'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$posts</span><span class="token punctuation">;</span></code></pre>
<h2 id="using-block">Using the block</h2>
<p><img src="/images/block-guide-editor.jpg" alt="&quot;Block backend UI&quot;" title="Using the block in the editor"></p>
<p>This is what our block looks like when we insert it into the editor. The block's preview is on the left in the content column and our block's fields are in the right sidebar.</p>
<p><img src="/images/block-guide-select-posts.jpg" alt="&quot;Block backend UI - Select Posts&quot;" title="Using the block in the editor to select posts"></p>
<p>If I change the &quot;Selection Type&quot; from <code>Recent</code> to <code>Select posts</code> I'll be able to use the &quot;Select Posts&quot; relationship field.</p>
<aside 
  x-data="visibleNavHighlighter" 
  x-on:scroll.window.throttle.50ms="onScroll()" 
  x-show.important="$store.showToc"
  x-transition.opacity
  x-cloak>
  <div class="fixed mt-20 right-0 bottom-0 hidden w-64 overflow-y-auto py-8 px-6 md:top-[4rem] xl:block">
    <p class="text-base">In This Guide</p>
    <ul class="space-y-3 list-none m-0 p-0">
        <template x-for="heading in headings">
            <li class="text-base p-0">
                <a :href="'#'+heading.id" class="no-underline" 
                :class="visibleHeadingId == heading.id ? 'font-medium text-orange-400 dark:text-orange-400' : 'text-slate-800 dark:text-white'" x-text="heading.innerText"></a>
            </li>
        </template>
    </ul>
  </div>
</aside>

    <div class="bg-slate-800  max-w-3xl mt-14 p-8 md:px-16 md:py-12 rounded-lg border border-slate-700 relative shadow-2xl shadow-cyan-900/40 md:flex items-center gap-12">
        <svg data-name="Group 20" xmlns="http://www.w3.org/2000/svg" class="h-20 mx-auto md:mx-none md:h-32" viewBox="0 0 226.913 104.472"><path data-name="Union 1" d="M159.849 104.038V.228h67.063v24.4h-42.109V42.79h40.03v24.4h-40.03v36.848Z" fill="#fff"></path><path data-name="Intersection 2" d="M159.973 61.117h17.43c-.094.551-.2 1.1-.307 1.638a51.646 51.646 0 0 1-3.027 9.75 51.889 51.889 0 0 1-4.788 8.822 52.313 52.313 0 0 1-6.342 7.69q-1.427 1.425-2.966 2.742Zm0-17.14v-31.16q1.536 1.315 2.966 2.744a52.312 52.312 0 0 1 6.342 7.687 51.927 51.927 0 0 1 4.792 8.823 51.623 51.623 0 0 1 3.023 9.746c.145.709.278 1.435.393 2.158Z" fill="#e5e5e5"></path><path data-name="Subtraction 6" d="M121.539 104.227a52.334 52.334 0 0 1-10.468-1.056 51.649 51.649 0 0 1-18.572-7.814 52.09 52.09 0 0 1-18.818-22.852 51.665 51.665 0 0 1-3.027-9.75 52.435 52.435 0 0 1 0-20.936 51.67 51.67 0 0 1 7.815-18.57A52.107 52.107 0 0 1 101.321 4.43a51.752 51.752 0 0 1 9.75-3.026 52.466 52.466 0 0 1 20.935 0 51.642 51.642 0 0 1 18.572 7.815 52.076 52.076 0 0 1 18.821 22.852 51.618 51.618 0 0 1 3.027 9.749c.145.71.278 1.436.394 2.158h-24.078c-.267-.837-.577-1.675-.923-2.492a29.012 29.012 0 0 0-2.682-4.94 29.162 29.162 0 0 0-12.8-10.538 29.046 29.046 0 0 0-27.58 2.681 29.176 29.176 0 0 0-10.538 12.8 29.049 29.049 0 0 0 2.68 27.58 29.173 29.173 0 0 0 12.8 10.539 29.051 29.051 0 0 0 27.584-2.682 29.227 29.227 0 0 0 7.856-7.857 29.034 29.034 0 0 0 3.76-7.951h23.83c-.094.551-.2 1.1-.307 1.638a51.661 51.661 0 0 1-7.815 18.572 52.09 52.09 0 0 1-22.852 18.821 51.636 51.636 0 0 1-9.749 3.026 52.332 52.332 0 0 1-10.467 1.052Z" fill="#fff"></path><path data-name="Intersection 1" d="M101.422 99.906a51.612 51.612 0 0 1-8.778-4.765A51.84 51.84 0 0 1 73.92 72.404a51.356 51.356 0 0 1-3.011-9.7 52.158 52.158 0 0 1 0-20.831 51.333 51.333 0 0 1 3.011-9.7q.998-2.362 2.238-4.625l30.231 74.163a51.327 51.327 0 0 1-4.967-1.805Z" fill="#e5e5e5"></path><path data-name="Subtraction 1" d="M101.282 104.472H73.234l-5.713-15.586H32.2l-5.713 15.585H0L41.032 0h17.66l42.59 104.471ZM49.861 41.2l-8.829 24.138h17.66L49.861 41.2Z" fill="#fff"></path></svg>
        <div class="w-full">
            <h3 class="text-xl ignore-toc text-center font-medium mt-8 md:text-left md:m-0">Get The Free ACF Blocks Mini Course</h3>
            <script src="https://f.convertkit.com/ckjs/ck.5.js"></script>
            <form action="https://app.convertkit.com/forms/3686824/subscriptions" class="seva-form formkit-form" method="post" data-sv-form="3432284" data-uid="52a76ab010" data-format="inline" data-version="5" data-options="{&quot;settings&quot;:{&quot;after_subscribe&quot;:{&quot;action&quot;:&quot;message&quot;,&quot;success_message&quot;:&quot;Success! Now check your email to confirm your subscription.&quot;,&quot;redirect_url&quot;:&quot;&quot;},&quot;analytics&quot;:{&quot;google&quot;:null,&quot;fathom&quot;:null,&quot;facebook&quot;:null,&quot;segment&quot;:null,&quot;pinterest&quot;:null,&quot;sparkloop&quot;:null,&quot;googletagmanager&quot;:null},&quot;modal&quot;:{&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15},&quot;powered_by&quot;:{&quot;show&quot;:true,&quot;url&quot;:&quot;https://convertkit.com/features/forms?utm_campaign=poweredby&amp;utm_content=form&amp;utm_medium=referral&amp;utm_source=dynamic&quot;},&quot;recaptcha&quot;:{&quot;enabled&quot;:false},&quot;return_visitor&quot;:{&quot;action&quot;:&quot;show&quot;,&quot;custom_content&quot;:&quot;&quot;},&quot;slide_in&quot;:{&quot;display_in&quot;:&quot;bottom_right&quot;,&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15},&quot;sticky_bar&quot;:{&quot;display_in&quot;:&quot;top&quot;,&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15}},&quot;version&quot;:&quot;5&quot;}" min-width="400">
                <div data-style="clean">
                    <ul class="formkit-alert formkit-alert-error" data-element="errors" data-group="alert"></ul>
                    <div data-element="fields" data-stacked="false" class="flex flex-col md:flex-row items-center gap-4 mt-3 w-full">
                        <input class="formkit-input px-3 py-3 max-w-xs w-full text-base rounded-md min-w-0 text-white placeholder:text-slate-200 bg-slate-900" name="email_address" aria-label="Email Address" placeholder="Email Address" required="" type="email">

                        <button data-element="submit" class="formkit-submit formkit-submit text-base bg-cyan-300 px-3 py-3 rounded-md w-full max-w-xs md:w-auto">
                            <div class="formkit-spinner">
                                <div></div>
                                <div></div>
                                <div></div>
                            </div><span class="text-cyan-900 whitespace-nowrap">Keep me updated</span>
                        </button>
                    </div>
                </div>
            </form>
            
        
            <a href="https://www.modernwpdev.co/#acf" class="mt-8 md:mt-5 flex items-center md:text-left justify-center md:justify-start gap-2 no-underline text-white text-opacity-70 transition-colors hover:text-opacity-100">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>

                <span>Checkout the lesson outline</span>
            </a>
            
        </div>
        <div class="absolute top-0 left-11 right-20 h-px bg-gradient-to-r from-slate-800/0 via-cyan-400 to-slate-800/0"></div>
        <div class="absolute -bottom-px left-11 right-20 h-px bg-gradient-to-r from-slate-800/0 via-cyan-400 to-slate-800/0"></div>
    </div>
</article>

<div class=" max-w-screen-md mx-auto px-4 mt-12">
    <div id="disqus_thread"></div>
</div>
<script>
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://joeyfarruggio-com.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </main>

    <footer class="py-16 bg-slate-900 mt-16"> 

    </footer>
    <script defer src="/js/app.min.js"></script>
</body>
</html>